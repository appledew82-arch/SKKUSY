<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>SKKUSY | í¸ì… ì˜ì–´ ì•„ì¹´ì´ë¸Œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --primary: #daf0fb;
      --secondary: #fff0f0;
      --bg: #f7f9fc;
      --text-main: #1f2933;
      --text-sub: #6b7280;
      --border-soft: #e5e7eb;
      --card-shadow: 0 10px 25px rgba(15, 23, 42, 0.06);
      --radius-lg: 18px;
      --radius-xl: 24px;
      --transition-fast: 0.18s ease-out;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Pretendard", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #daf0fb 0, #fff0f0 40%, #f7f9fc 80%);
      color: var(--text-main);
      min-height: 100vh;
    }

    .app-shell {
      max-width: 1120px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .brand-logo {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--card-shadow);
      font-weight: 800;
      font-size: 18px;
      letter-spacing: 1px;
      color: #243b53;
    }

    .brand-text-main {
      font-weight: 700;
      font-size: 22px;
      letter-spacing: 0.04em;
    }

    .brand-text-sub {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 3px;
    }

    .tag-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 11px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(8px);
      font-size: 11px;
      color: var(--text-sub);
      white-space: nowrap;
    }

    nav {
      position: sticky;
      top: 10px;
      z-index: 10;
      margin-bottom: 18px;
    }

    .nav-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      box-shadow: 0 6px 18px rgba(148, 163, 184, 0.25);
    }

    .nav-tab {
      border: none;
      background: transparent;
      padding: 8px 16px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-sub);
      cursor: pointer;
      transition: background var(--transition-fast), color var(--transition-fast),
        box-shadow var(--transition-fast), transform var(--transition-fast);
    }

    .nav-tab.active {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #1f2933;
      box-shadow: 0 6px 14px rgba(148, 163, 184, 0.55);
      transform: translateY(-1px);
    }

    .content-shell {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.2fr);
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 880px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .content-shell {
        grid-template-columns: minmax(0, 1fr);
      }
      nav {
        position: static;
      }
    }

    .panel {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-xl);
      padding: 18px 18px 20px;
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(226, 232, 240, 0.9);
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 12px;
    }

    .panel-title {
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-title span.icon {
      font-size: 18px;
    }

    .panel-sub {
      font-size: 12px;
      color: var(--text-sub);
    }

    .small-muted {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 4px;
    }

    input[type="text"],
    input[type="date"],
    input[type="time"],
    input[type="month"],
    textarea,
    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      font-size: 13px;
      background: #f9fafb;
      outline: none;
      transition: border var(--transition-fast), box-shadow var(--transition-fast),
        background var(--transition-fast);
      resize: vertical;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: #93c5fd;
      box-shadow: 0 0 0 1px rgba(147, 197, 253, 0.6);
      background: #ffffff;
    }

    label {
      display: block;
      font-size: 12px;
      margin-bottom: 4px;
      font-weight: 500;
      color: #4b5563;
    }

    .field-row {
      display: flex;
      gap: 10px;
    }

    .field {
      flex: 1;
      margin-bottom: 10px;
    }

    .btn-primary,
    .btn-ghost {
      border-radius: 999px;
      font-size: 12px;
      padding: 7px 14px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      transition: background var(--transition-fast), transform var(--transition-fast),
        box-shadow var(--transition-fast), opacity var(--transition-fast);
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      box-shadow: 0 8px 18px rgba(148, 163, 184, 0.45);
      color: #1f2933;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(148, 163, 184, 0.7);
    }

    .btn-ghost {
      background: transparent;
      border: 1px dashed rgba(148, 163, 184, 0.8);
      color: var(--text-sub);
    }

    .btn-ghost:hover {
      background: rgba(248, 250, 252, 0.9);
    }

    .btn-row {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    .btn-small {
      padding: 3px 8px;
      font-size: 11px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: #f9fafb;
      cursor: pointer;
    }

    .btn-small + .btn-small {
      margin-left: 4px;
    }

    .item-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
      max-height: 200px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .item-card {
      padding: 9px 10px;
      border-radius: var(--radius-lg);
      background: #f9fafb;
      border: 1px solid rgba(229, 231, 235, 0.9);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .item-main {
      font-size: 13px;
      font-weight: 500;
    }

    .item-meta {
      font-size: 11px;
      color: var(--text-sub);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: space-between;
      align-items: center;
    }

    .pill-soft {
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(218, 240, 251, 0.8);
      font-size: 10px;
      color: #1e40af;
    }

    .goal-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
    }

    .goal-item {
      font-size: 13px;
      padding: 7px 9px;
      border-radius: 10px;
      background: #f9fafb;
      border: 1px dashed rgba(209, 213, 219, 0.9);
      display: flex;
      justify-content: space-between;
      gap: 6px;
      align-items: center;
    }

    .goal-item span.label {
      font-weight: 500;
    }

    .home-section {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .goal-quote {
      border-radius: 18px;
      padding: 14px 14px 16px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background:
        linear-gradient(120deg, rgba(218, 240, 251, 0.6), rgba(255, 240, 240, 0.6));
    }

    .goal-quote-label {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #4b5563;
      margin-bottom: 4px;
    }

    .goal-quote-text {
      font-size: 18px;
      font-weight: 700;
      line-height: 1.4;
      color: #1f2933;
      margin-bottom: 6px;
    }

    .goal-quote-sub {
      font-size: 12px;
      color: var(--text-sub);
    }

    .home-goals {
      display: grid;
      grid-template-columns: 2.1fr 1.2fr;
      gap: 10px;
    }

    @media (max-width: 720px) {
      .home-goals {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .progress-bar-shell {
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: rgba(226, 232, 240, 0.9);
      overflow: hidden;
      margin-top: 6px;
    }

    .progress-bar {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #60a5fa, #f97373);
      width: 42%;
    }

    .study-tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .study-tag {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(255, 240, 240, 0.9);
      color: #b91c1c;
    }

    .today-day-label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 10px;
      border-radius: 999px;
      background: #fff9c4;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .today-day-label span.badge {
      font-size: 11px;
      font-weight: 500;
      color: #92400e;
      opacity: 0.9;
    }

    .checklist {
      border-radius: 14px;
      border: 1px dashed rgba(209, 213, 219, 0.9);
      padding: 8px 10px;
      background: #f9fafb;
      min-height: 90px;
    }

    .check-item-row {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 6px;
      font-size: 13px;
    }

    .check-item-row input[type="checkbox"] {
      margin-top: 3px;
      cursor: pointer;
    }

    .check-item-text {
      flex: 1;
      border: none;
      border-bottom: 1px dashed #e5e7eb;
      background: transparent;
      font-size: 13px;
      padding: 2px 0;
      outline: none;
    }

    .calendar-grid {
      margin-top: 8px;
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid rgba(226, 232, 240, 0.9);
      width: 100%;
    }

    .calendar-header-row {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 6px 0;
      font-size: 11px;
      font-weight: 600;
      text-align: center;
    }

    .calendar-header-cell {
      color: #1f2933;
    }

    .calendar-body {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      background: #ffffff;
    }

    .calendar-cell {
      border-top: 1px solid rgba(243, 244, 246, 0.9);
      border-right: 1px solid rgba(243, 244, 246, 0.9);
      min-height: 58px;
      padding: 4px 4px 6px;
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .calendar-cell:nth-child(7n) {
      border-right: none;
    }

    .calendar-day-num {
      font-weight: 600;
      color: #374151;
    }

    .calendar-tag {
      margin-top: 1px;
      padding: 2px 4px;
      border-radius: 6px;
      font-size: 10px;
      background: #fff9c4;
      color: #92400e;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      cursor: pointer;
    }

    .calendar-index {
      margin-top: 2px;
      padding: 2px 4px;
      border-radius: 6px;
      font-size: 10px;
      background: #ede9fe;
      color: #5b21b6;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      cursor: pointer;
    }

    .schedule-detail {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 14px;
      background: #f5f3ff;
      border: 1px solid #ddd6fe;
      font-size: 12px;
    }

    .schedule-detail-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .schedule-detail-row {
      margin-bottom: 2px;
    }

    .schedule-detail-row span.label {
      font-weight: 500;
      margin-right: 4px;
    }

    .hidden {
      display: none;
    }

    .resource-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .filter-pill {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: #f9fafb;
      cursor: pointer;
      color: var(--text-sub);
      transition: background var(--transition-fast), color var(--transition-fast),
        border var(--transition-fast);
    }

    .filter-pill.active {
      background: rgba(218, 240, 251, 0.95);
      color: #1e40af;
      border-color: #93c5fd;
    }

    .resource-title {
      font-size: 13px;
      font-weight: 500;
    }

    .resource-meta {
      font-size: 11px;
      color: var(--text-sub);
    }

    .memo-section textarea {
      min-height: 160px;
      font-size: 13px;
      line-height: 1.5;
    }

    .memo-hint {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    .view {
      display: none;
    }
    .view.active {
      display: block;
      animation: fadeIn 0.18s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(3px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    #day-context-menu {
      position: absolute;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.15);
      font-size: 12px;
      padding: 4px 0;
      display: none;
      z-index: 9999;
      min-width: 140px;
    }

    .day-context-item {
      padding: 6px 10px;
      cursor: pointer;
      white-space: nowrap;
    }

    .day-context-item:hover {
      background: #f3f4f6;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="brand">
        <div class="brand-logo">SY</div>
        <div>
          <div class="brand-text-main">SKKUSY</div>
          <div class="brand-text-sub">
            í¸ì… ì˜ì–´ ì•„ì¹´ì´ë¸Œ Â· ê¹€ì‹œìœ¤ ì „ìš© ê¸°ë¡ ê³µê°„
          </div>
        </div>
      </div>
      <div class="tag-pill" id="dday-pill">
        <span>ğŸ±</span>
        <span id="dday-text">D-000 Â· 2027-03-02ê¹Œì§€</span>
      </div>
    </header>

    <nav>
      <div class="nav-tabs">
        <button class="nav-tab active" data-target="home-view">í™ˆ</button>
        <button class="nav-tab" data-target="calendar-view">ìº˜ë¦°ë”</button>
        <button class="nav-tab" data-target="resources-view">ìë£Œ</button>
        <button class="nav-tab" data-target="study-view">ê³µë¶€</button>
        <button class="nav-tab" data-target="memo-view">ë©”ëª¨</button>
      </div>
    </nav>

    <!-- í™ˆ -->
    <main id="home-view" class="view active">
      <div class="content-shell">
        <section class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ’</span>
              Siyoon's Desk
            </div>
          </div>

          <div class="home-section">
            <div class="goal-quote">
              <div class="goal-quote-label">FINAL GOAL</div>
              <div class="goal-quote-text">ì„±ê· ê´€ëŒ€í•™êµ ê²½ì˜í•™ê³¼ 25í•™ë²ˆ ê¹€ì‹œìœ¤</div>
              <div class="goal-quote-sub">æ”¾ä¸‹ç€, ç€å¾—å»</div>
            </div>

            <div class="home-goals">
              <div class="panel-sub">
                <strong>ì´ë²ˆ ì£¼ í¬ì»¤ìŠ¤</strong>
                <ul class="goal-list">
                  <li class="goal-item">
                    <span class="label weekly-focus" data-focus-key="focus-1" contenteditable="true">
                      ë…í•´: ì§€ë¬¸ êµ¬ì¡° ë¶„ì„ + í•¨ì˜Â·ë¹ˆì¹¸ ìœ í˜• ì •ë¦¬
                    </span>
                  </li>
                  <li class="goal-item">
                    <span class="label weekly-focus" data-focus-key="focus-2" contenteditable="true">
                      ì–´íœ˜: MVP vol.1 íšŒë… ì§„ë„ ìœ ì§€
                    </span>
                  </li>
                  <li class="goal-item">
                    <span class="label weekly-focus" data-focus-key="focus-3" contenteditable="true">
                      ë¬¸ë²•: ìì£¼ í‹€ë¦¬ëŠ” í¬ì¸íŠ¸ ì˜¤ë‹µë…¸íŠ¸í™”
                    </span>
                  </li>
                  <li class="goal-item">
                    <span class="label weekly-focus" data-focus-key="focus-4" contenteditable="true">
                      ë…¼ë¦¬: ë…¼ë¦¬ ë¬¸ì œ 1ì¼ 5ë¬¸ì œ + ì˜¤ë‹µ íŒ¨í„´ íŒŒì•…
                    </span>
                  </li>
                </ul>
              </div>
              <div>
                <div class="panel-sub"><strong>ì´ë²ˆ ì£¼ ì²´ê° ì§„ë„</strong></div>
                <div class="progress-bar-shell">
                  <div class="progress-bar" id="weekly-progress-bar"></div>
                </div>
                <div class="small-muted" id="weekly-progress-text" contenteditable="true">
                  ì´ë²ˆ ì£¼ëŠ” ê³„íšì˜ ì•½ 40% ì •ë„ ì±„ìš´ ëŠë‚Œì…ë‹ˆë‹¤.
                </div>
              </div>
            </div>
          </div>
        </section>

        <aside class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">âœ…</span>
              ì˜¤ëŠ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
            </div>
          </div>

          <div class="today-day-label" id="today-day-label">
            <span class="badge">ì˜¤ëŠ˜ DAY</span>
            <span id="today-day-text">DAY --</span>
          </div>
          <div class="checklist" id="today-checklist">
            <div id="checklist-items"></div>
            <button class="btn-small" type="button" id="add-check-item">+ í•­ëª© ì¶”ê°€</button>
          </div>
        </aside>
      </div>
    </main>

    <!-- ìº˜ë¦°ë” -->
    <main id="calendar-view" class="view">
      <div class="content-shell">
        <section class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ“†</span>
              ìº˜ë¦°ë”
            </div>
          </div>

          <div class="field-row" style="margin-bottom:6px;">
            <div class="field">
              <label for="calendar-month">ì›” ì„ íƒ</label>
              <input type="month" id="calendar-month" />
            </div>
            <div class="field">
              <label>&nbsp;</label>
              <button class="btn-ghost" type="button" id="go-today-month">ì´ë²ˆ ë‹¬ë¡œ ì´ë™</button>
            </div>
          </div>

          <div class="small-muted" id="calendar-month-label"></div>

          <div class="calendar-grid">
            <div class="calendar-header-row">
              <div class="calendar-header-cell">ì›”</div>
              <div class="calendar-header-cell">í™”</div>
              <div class="calendar-header-cell">ìˆ˜</div>
              <div class="calendar-header-cell">ëª©</div>
              <div class="calendar-header-cell">ê¸ˆ</div>
              <div class="calendar-header-cell">í† </div>
              <div class="calendar-header-cell">ì¼</div>
            </div>
            <div class="calendar-body" id="calendar-body"></div>
          </div>
        </section>

        <aside class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">â°</span>
              ì˜¤ëŠ˜ ì¼ì • ì¶”ê°€
            </div>
          </div>

          <div class="field">
            <label for="schedule-title">ì¼ì • ì œëª©</label>
            <input id="schedule-title" type="text" placeholder="ì˜ˆ: ë…í•´ ê¸°ì¶œ 5ì§€ë¬¸" />
          </div>
          <div class="field-row">
            <div class="field">
              <label for="schedule-date">ë‚ ì§œ</label>
              <input id="schedule-date" type="date" />
            </div>
            <div class="field">
              <label for="schedule-time">ì‹œê°„</label>
              <input id="schedule-time" type="time" />
            </div>
          </div>
          <div class="field">
            <label for="schedule-type">êµ¬ë¶„</label>
            <select id="schedule-type">
              <option>ë…í•´</option>
              <option>ì–´íœ˜</option>
              <option>ë¬¸ë²•</option>
              <option>ë…¼ë¦¬</option>
              <option>ì‹¤ì „</option>
              <option>TOEIC</option>
              <option>ê¸°íƒ€</option>
            </select>
          </div>
          <div class="field">
            <label for="schedule-place">ì¥ì†Œ/ë¹„ê³ </label>
            <input id="schedule-place" type="text" placeholder="ì˜ˆ: ì§‘, ë…ì„œì‹¤, ì¹´í˜ ë“±" />
          </div>
          <div class="btn-row">
            <button class="btn-primary" type="button" id="add-schedule-btn">ì¼ì • ì¶”ê°€</button>
          </div>

          <ul class="item-list" id="schedule-list" style="margin-top:10px;"></ul>

          <div id="schedule-detail" class="schedule-detail hidden">
            <div class="schedule-detail-title" id="detail-title"></div>
            <div class="schedule-detail-row">
              <span class="label">ë‚ ì§œ</span><span id="detail-date"></span>
            </div>
            <div class="schedule-detail-row">
              <span class="label">ì‹œê°„</span><span id="detail-time"></span>
            </div>
            <div class="schedule-detail-row">
              <span class="label">êµ¬ë¶„</span><span id="detail-type"></span>
            </div>
            <div class="schedule-detail-row">
              <span class="label">ì¥ì†Œ/ë¹„ê³ </span><span id="detail-place"></span>
            </div>
            <div class="schedule-detail-row" style="text-align:right;margin-top:4px;">
              <button class="btn-small" type="button" id="close-detail-btn">ë‹«ê¸°</button>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <!-- ìë£Œ -->
    <main id="resources-view" class="view">
      <div class="content-shell">
        <section class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ—‚ï¸</span>
              ìë£Œ
            </div>
            <div class="panel-sub">
              ê¸°ì¶œ PDF, ì¸ê°• ë…¸íŠ¸, MVP vol.1 ì •ë¦¬ë³¸ ë“± ìë£Œì˜ ëª©ì°¨ë¥¼ ëª¨ì•„ë‘ëŠ” ê³µê°„
            </div>
          </div>

          <div class="resource-filters">
            <button class="filter-pill active" type="button">ì „ì²´</button>
            <button class="filter-pill" type="button">ê¸°ì¶œë¬¸ì œ</button>
            <button class="filter-pill" type="button">ë…í•´</button>
            <button class="filter-pill" type="button">ì–´íœ˜</button>
            <button class="filter-pill" type="button">ë¬¸ë²•</button>
            <button class="filter-pill" type="button">ë…¼ë¦¬</button>
            <button class="filter-pill" type="button">ì—ì„¸ì´/ì‘ë¬¸</button>
          </div>

          <ul class="item-list">
            <li class="item-card">
              <div class="resource-title">2024 ìˆ˜ëŠ¥ ì˜ì–´ ê¸°ì¶œ PDF</div>
              <div class="resource-meta">
                ìœ„ì¹˜: /ìë£Œ/ê¸°ì¶œ/2024_suneung.pdf Â· íƒœê·¸: ë…í•´, í•¨ì˜, ë¹ˆì¹¸
              </div>
            </li>
            <li class="item-card">
              <div class="resource-title">í¸ì… ë…í•´ ì¸ê°• ì •ë¦¬ ë…¸íŠ¸ (1~3ê°•)</div>
              <div class="resource-meta">
                ìœ„ì¹˜: /ë…¸íŠ¸/ë…í•´/lecture_01_03.md Â· íƒœê·¸: êµ¬ì¡°ë…í•´, íë¦„íŒŒì•…
              </div>
            </li>
            <li class="item-card">
              <div class="resource-title">MVP vol.1 DAY 01~20 ë‹¨ì–´ ì •ë¦¬</div>
              <div class="resource-meta">
                ìœ„ì¹˜: /ì–´íœ˜/mvp_vol1_day01_20.xlsx Â· íƒœê·¸: ì–´íœ˜, MVP vol.1
              </div>
            </li>
          </ul>
        </section>

        <aside class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">â•</span>
              ìë£Œ ë“±ë¡ í¼
            </div>
            <div class="panel-sub">
              ìƒˆ PDF/ë…¸íŠ¸/ë§í¬ë¥¼ ì¶”ê°€í•  ë•Œ í•„ìš”í•œ ìµœì†Œ ì •ë³´ ì •ë¦¬
            </div>
          </div>

          <div class="field">
            <label for="res-name">ìë£Œ ì´ë¦„</label>
            <input id="res-name" type="text" placeholder="ì˜ˆ: MVP vol.1 DAY 21~40 ë‹¨ì–´ ì •ë¦¬" />
          </div>
          <div class="field">
            <label for="res-path">íŒŒì¼ ê²½ë¡œ ë˜ëŠ” ë§í¬</label>
            <input id="res-path" type="text" placeholder="ì˜ˆ: /ì–´íœ˜/mvp_vol1_day21_40.xlsx ë˜ëŠ” https://..." />
          </div>
          <div class="field">
            <label for="res-tags">íƒœê·¸</label>
            <input id="res-tags" type="text" placeholder="ì˜ˆ: ì–´íœ˜, MVP vol.1, ë°˜ë³µí•™ìŠµ" />
          </div>
          <div class="btn-row">
            <button class="btn-primary" type="button">ìë£Œ ëª©ë¡ì— ì¶”ê°€</button>
          </div>
          <div class="small-muted">
            ì‹¤ì œ íŒŒì¼ì€ í´ë¼ìš°ë“œ(êµ¬ê¸€ ë“œë¼ì´ë¸Œ ë“±)ì— ë‘ê³ , ì´ ì‚¬ì´íŠ¸ì—ëŠ” ì´ë¦„Â·ìœ„ì¹˜Â·íƒœê·¸ë§Œ
            ì •ë¦¬í•´ë‘ë©´ ê´€ë¦¬ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤.
          </div>
        </aside>
      </div>
    </main>

    <!-- ê³µë¶€ -->
    <main id="study-view" class="view">
      <div class="content-shell">
        <section class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">âœï¸</span>
              ê³µë¶€ ê¸°ë¡
            </div>
            <div class="panel-sub">
              ë‚ ì§œÂ·ì˜ì—­Â·ëŠë‚€ ì ê¹Œì§€ ì ëŠ” ê³µë¶€ ì¼ì§€ ê³µê°„
            </div>
          </div>

          <div class="field-row">
            <div class="field">
              <label for="study-date">ë‚ ì§œ</label>
              <input id="study-date" type="date" />
            </div>
            <div class="field">
              <label for="study-area">ì˜ì—­</label>
              <select id="study-area">
                <option>ë…í•´</option>
                <option>ì–´íœ˜</option>
                <option>ë¬¸ë²•</option>
                <option>ë…¼ë¦¬</option>
                <option>ì—ì„¸ì´/ì‘ë¬¸</option>
                <option>ê¸°ì¶œ ì¢…í•©</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label for="study-content">ì˜¤ëŠ˜ í•œ ê³µë¶€</label>
            <textarea
              id="study-content"
              rows="4"
              placeholder="ì˜ˆ: ë…í•´ ê¸°ì¶œ 4ì§€ë¬¸ ë¶„ì„, ë…¼ë¦¬ ë¬¸ì œ 5ë¬¸ì œ, MVP vol.1 DAY 25-26 ì•”ê¸° ë“±"
            ></textarea>
          </div>

          <div class="field">
            <label for="study-thought">ëŠë‚€ ì  / ë‚´ì¼ ê°œì„ ì </label>
            <textarea
              id="study-thought"
              rows="3"
              placeholder="ì˜ˆ: ë…¼ë¦¬ì—ì„œ ì„ ì§€ íŒë‹¨ì´ ëŠë¦¬ë¯€ë¡œ ë‚´ì¼ì€ ì„ ì§€ ì œê±° ì—°ìŠµ ìœ„ì£¼ë¡œ ì§„í–‰."
            ></textarea>
          </div>

          <div class="study-tag-row">
            <span class="study-tag">ì˜¤ëŠ˜ ì§‘ì¤‘ ì˜ ë¨</span>
            <span class="study-tag">ì»¨ë””ì…˜ ë³´í†µ</span>
            <span class="study-tag">ì»¨ë””ì…˜ ì•ˆ ì¢‹ìŒ</span>
          </div>

          <div class="btn-row">
            <button class="btn-primary" type="button">ê³µë¶€ ê¸°ë¡ ì €ì¥</button>
          </div>
        </section>

        <aside class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ“Š</span>
              ìµœê·¼ ì¼ì§€ ìš”ì•½
            </div>
            <div class="panel-sub">
              ìµœê·¼ ì¼ì£¼ì¼ ì •ë„ì˜ ê¸°ë¡ì„ ê°„ë‹¨íˆ ë¦¬ìŠ¤íŠ¸ë¡œ í™•ì¸
            </div>
          </div>

          <ul class="item-list">
            <li class="item-card">
              <div class="item-main">2025-11-26 Â· ë…í•´</div>
              <div class="item-meta">
                <span>ê¸°ì¶œ 3ì§€ë¬¸ + êµ¬ì¡° ë¶„ì„</span>
                <span class="pill-soft">ì„ ì§€ ê²€ì¦ ì—°ìŠµ</span>
              </div>
            </li>
            <li class="item-card">
              <div class="item-main">2025-11-27 Â· ì–´íœ˜</div>
              <div class="item-meta">
                <span>MVP vol.1 DAY 19-20</span>
                <span class="pill-soft">í—·ê°ˆë¦¬ëŠ” ë‹¨ì–´ ì •ë¦¬</span>
              </div>
            </li>
            <li class="item-card">
              <div class="item-main">2025-11-28 Â· ë…¼ë¦¬</div>
              <div class="item-meta">
                <span>ë…¼ë¦¬ ë¬¸ì œ 5ë¬¸ì œ</span>
                <span class="pill-soft">ì˜¤ë‹µ íŒ¨í„´ ì •ë¦¬</span>
              </div>
            </li>
          </ul>
        </aside>
      </div>
    </main>

    <!-- ë©”ëª¨ -->
    <main id="memo-view" class="view">
      <div class="content-shell">
        <section class="panel memo-section">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ“</span>
              ë©”ëª¨
            </div>
            <div class="panel-sub">
              ì§€ë¬¸ ì•„ì´ë””ì–´, ê¹¨ë‹¬ì€ ì , ì„ ì§€ ì œê±° íŒ ë“±ì„ ììœ ë¡­ê²Œ ì ëŠ” ê³µê°„
            </div>
          </div>

          <textarea
            placeholder="ì˜ˆ:
[ë…í•´] ë¬¸ë‹¨ ê¸°ëŠ¥ ë¨¼ì € ì¡ê³ , ê° ë¬¸ë‹¨ì´ ì£¼ì¥/ê·¼ê±°/ì˜ˆì‹œ/ë°˜ë°• ì¤‘ ë¬´ì—‡ì¸ì§€ í‘œì‹œí•˜ê¸°.
[ë…¼ë¦¬] ë³´ê¸°ì™€ ì§€ë¬¸ êµ¬ì¡°ë¥¼ ë‚˜ë€íˆ ë‘ê³ , ê²°ë¡ ì´ ì–´ë””ì„œ ì–´ë–»ê²Œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•˜ê¸°.
[ì–´íœ˜] MVP vol.1 í—·ê°ˆë¦¬ëŠ” ë‹¨ì–´ëŠ” ì˜ˆë¬¸ 2ê°œ ì´ìƒ ì§ì ‘ ë§Œë“¤ì–´ ë³´ê¸°."
          ></textarea>

          <div class="memo-hint">
            ë‚˜ì¤‘ì— ë©”ëª¨ë¥¼ ë¶„ë¥˜í•˜ê³  ì‹¶ë‹¤ë©´, ë§¨ ì•ì— [ë…í•´], [ë…¼ë¦¬], [ì–´íœ˜]ì²˜ëŸ¼ íƒœê·¸ë¥¼ ë¶™ì—¬ ë‘ë©´
            ê²€ìƒ‰ê³¼ ì •ë¦¬ê°€ í¸í•´ì§‘ë‹ˆë‹¤.
          </div>
        </section>

        <aside class="panel">
          <div class="panel-header">
            <div class="panel-title">
              <span class="icon">ğŸ’¡</span>
              ê³ ì • ë©”ëª¨
            </div>
            <div class="panel-sub">
              í•­ìƒ ëˆˆì— ë„ê²Œ ë‘ê³  ì‹¶ì€ ë¬¸ì¥, ë‹¤ì§, ê³µë¶€ ì›ì¹™
            </div>
          </div>
          <ul class="goal-list">
            <li class="goal-item">
              <span class="label">ì •ë‹µì€ í•­ìƒ ì§€ë¬¸ê³¼ ë…¼ë¦¬ ì•ˆì— ìˆë‹¤.</span>
            </li>
            <li class="goal-item">
              <span class="label">ê°ì´ ì•„ë‹ˆë¼ ê·¼ê±°ë¡œ í’€ê¸°.</span>
            </li>
            <li class="goal-item">
              <span class="label">ì–´ì œì˜ ë‚˜ì™€ë§Œ ë¹„êµí•˜ê¸°.</span>
            </li>
          </ul>
        </aside>
      </div>
    </main>
  </div>

  <div id="day-context-menu">
    <div class="day-context-item" data-action="delay">ë¯¸ë£¨ê¸° (ì „ì²´ +1ì¼ ë’¤ë¡œ)</div>
    <div class="day-context-item" data-action="delete">ì‚­ì œ (í•´ë‹¹ ë‚ ì§œë§Œ ìˆ¨ê¸°ê¸°)</div>
  </div>

  <script>
    const tabs = document.querySelectorAll(".nav-tab");
    const views = document.querySelectorAll(".view");

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        const targetId = tab.getAttribute("data-target");
        tabs.forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");
        views.forEach((v) => v.classList.toggle("active", v.id === targetId));
      });
    });

    function toMidnight(date) {
      return new Date(date.getFullYear(), date.getMonth(), date.getDate());
    }

    (function setupDDay() {
      const target = new Date(2027, 2, 2);
      const today = toMidnight(new Date());
      const diffMs = target.getTime() - today.getTime();
      const oneDay = 1000 * 60 * 60 * 24;
      const diffDays = Math.ceil(diffMs / oneDay);
      const ddayTextEl = document.getElementById("dday-text");

      if (diffDays > 0) {
        ddayTextEl.textContent = `D-${diffDays} Â· 2027-03-02ê¹Œì§€`;
      } else if (diffDays === 0) {
        ddayTextEl.textContent = `D-DAY Â· 2027-03-02`;
      } else {
        ddayTextEl.textContent = `D+${Math.abs(diffDays)} Â· 2027-03-02 ì´í›„`;
      }
    })();

    // ğŸ”¹ MVP DAY ê¸°ì¤€ ì„¤ì •: 2025-12-03 = DAY 25-26
    const baseDate = new Date(2025, 11, 3);  // 12ì›”ì€ month=11
    const baseFirstDay = 25;
    const thresholdDate = new Date(2025, 11, 3); // 12/3 ì´ì „ì€ DAY ì•ˆ ë³´ì„

    const SCHEDULE_STORAGE_KEY = "skkusy-schedules";
    const DAY_OFFSET_KEY = "skkusy-v2-dayBaseOffset";
    const DAY_SKIP_KEY = "skkusy-v2-daySkipDates";

    function wrapDay(n) {
      let r = n % 60;
      if (r <= 0) r += 60;
      return r;
    }

    function loadDayOffset() {
      return parseInt(localStorage.getItem(DAY_OFFSET_KEY) || "0", 10);
    }

    function saveDayOffset(offset) {
      localStorage.setItem(DAY_OFFSET_KEY, String(offset));
    }

    function loadSkipDates() {
      const raw = localStorage.getItem(DAY_SKIP_KEY);
      if (!raw) return [];
      try {
        const arr = JSON.parse(raw);
        return Array.isArray(arr) ? arr : [];
      } catch {
        return [];
      }
    }

    function saveSkipDates(arr) {
      localStorage.setItem(DAY_SKIP_KEY, JSON.stringify(arr));
    }

    function isSkippedDate(dateKey, skipArr) {
      return skipArr.includes(dateKey);
    }

    function getMvpDayPair(date) {
      const dMid = toMidnight(date);
      const diffMs = dMid.getTime() - toMidnight(baseDate).getTime();
      const oneDay = 1000 * 60 * 60 * 24;
      const diff = Math.round(diffMs / oneDay);

      const offset = loadDayOffset(); // ë¯¸ë£¨ê¸° ëˆ„ë¥¸ íšŸìˆ˜ ë°˜ì˜

      const rawFirst = baseFirstDay + (diff * 2) + (offset * 2);
      const first = wrapDay(rawFirst);
      const second = wrapDay(rawFirst + 1);
      return { first, second };
    }

    function pad2(n) {
      return n.toString().padStart(2, "0");
    }

    function updateTodayDayLabel() {
  const today = new Date();
  const todayKey = getDateKeyFromDate(today);
  const skipArr = loadSkipDates();

  const labelEl = document.getElementById("today-day-label");
  const textEl = document.getElementById("today-day-text");

  // 1) ê¸°ì¤€ì¼(2025-12-03) ì´ì „ì´ê±°ë‚˜
  // 2) ì˜¤ëŠ˜ ë‚ ì§œê°€ skip ì²˜ë¦¬ë˜ì–´ ìˆìœ¼ë©´ â†’ DAY í‘œì‹œ ì•ˆ í•¨
  if (today < thresholdDate || isSkippedDate(todayKey, skipArr)) {
    textEl.textContent = "DAY --";
    return;
  }

  // ê·¸ ì™¸ì—ëŠ” offset, ë¯¸ë£¨ê¸°, ì‚­ì œ ìƒíƒœë¥¼ ë°˜ì˜í•´ì„œ DAY ê³„ì‚°
  const pair = getMvpDayPair(today);
  textEl.textContent = `DAY ${pad2(pair.first)}-${pad2(pair.second)}`;
}


    updateTodayDayLabel();

    const checklistItemsEl = document.getElementById("checklist-items");
    const addCheckItemBtn = document.getElementById("add-check-item");

    function addChecklistItem(text = "") {
      const row = document.createElement("div");
      row.className = "check-item-row";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";

      const input = document.createElement("input");
      input.type = "text";
      input.className = "check-item-text";
      input.value = text;
      input.placeholder = "í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”";

      row.appendChild(checkbox);
      row.appendChild(input);
      checklistItemsEl.appendChild(row);
    }

    addCheckItemBtn.addEventListener("click", () => addChecklistItem());
    addChecklistItem();

    function loadSchedules() {
      const raw = localStorage.getItem(SCHEDULE_STORAGE_KEY);
      if (!raw) return [];
      try {
        const parsed = JSON.parse(raw);
        return Array.isArray(parsed) ? parsed : [];
      } catch {
        return [];
      }
    }

    function saveSchedules(list) {
      localStorage.setItem(SCHEDULE_STORAGE_KEY, JSON.stringify(list));
    }

    const calendarBody = document.getElementById("calendar-body");
    const calendarMonthInput = document.getElementById("calendar-month");
    const calendarMonthLabel = document.getElementById("calendar-month-label");
    const goTodayMonthBtn = document.getElementById("go-today-month");

    let currentContextDateKey = null;

    function renderCalendar(year, month) {
      calendarBody.innerHTML = "";

      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const daysInMonth = lastDay.getDate();

      const jsWeekday = firstDay.getDay();
      const startWeekday = (jsWeekday + 6) % 7; // ì›”=0, í™”=1, ..., ì¼=6

      calendarMonthLabel.textContent = `${year}ë…„ ${String(month + 1).padStart(2, "0")}ì›”`;

      const totalCells = 42;
      const schedules = loadSchedules();
      const skipDates = loadSkipDates();

      for (let i = 0; i < totalCells; i++) {
        const cell = document.createElement("div");
        cell.className = "calendar-cell";

        const dateNum = i - startWeekday + 1;
        if (dateNum >= 1 && dateNum <= daysInMonth) {
          const cellDate = new Date(year, month, dateNum);

          const daySpan = document.createElement("span");
          daySpan.className = "calendar-day-num";
          daySpan.textContent = String(dateNum);
          cell.appendChild(daySpan);

          const dateKey = `${year}-${String(month + 1).padStart(2, "0")}-${String(
            dateNum
          ).padStart(2, "0")}`;

          if (cellDate >= thresholdDate && !isSkippedDate(dateKey, skipDates)) {
            const pair = getMvpDayPair(cellDate);
            const tagSpan = document.createElement("span");
            tagSpan.className = "calendar-tag";
            tagSpan.textContent = `DAY ${pad2(pair.first)}-${pad2(pair.second)}`;

            tagSpan.addEventListener("contextmenu", (e) => {
              e.preventDefault();
              currentContextDateKey = dateKey;
              showDayContextMenu(e.pageX, e.pageY);
            });

            cell.appendChild(tagSpan);
          }

          schedules.forEach((item, idx) => {
            if (item.date === dateKey) {
              const idxSpan = document.createElement("span");
              idxSpan.className = "calendar-index";
              idxSpan.textContent = item.title || "(ì œëª© ì—†ìŒ)";
              idxSpan.dataset.index = idx.toString();
              idxSpan.addEventListener("click", () => showScheduleDetail(idx));
              cell.appendChild(idxSpan);
            }
          });
        }

        calendarBody.appendChild(cell);
      }
    }

    function setMonthInputTo(year, month) {
      const value = `${year}-${String(month + 1).padStart(2, "0")}`;
      calendarMonthInput.value = value;
    }

    (function initCalendar() {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      setMonthInputTo(year, month);
      renderCalendar(year, month);
    })();

    calendarMonthInput.addEventListener("change", () => {
      const val = calendarMonthInput.value;
      if (!val) return;
      const [y, m] = val.split("-").map((v) => parseInt(v, 10));
      const year = y;
      const month = m - 1;
      if (!isNaN(year) && !isNaN(month)) {
        renderCalendar(year, month);
      }
    });

    goTodayMonthBtn.addEventListener("click", () => {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      setMonthInputTo(year, month);
      renderCalendar(year, month);
    });

    function getWeekKey() {
      const today = new Date();
      const day = today.getDay();
      const diff = day === 0 ? -6 : 1 - day; // ì›”ìš”ì¼ë¡œ ì´ë™
      const monday = new Date(today.getFullYear(), today.getMonth(), today.getDate() + diff);
      const y = monday.getFullYear();
      const m = String(monday.getMonth() + 1).padStart(2, "0");
      const d = String(monday.getDate()).padStart(2, "0");
      return `${y}-${m}-${d}`;
    }

    (function setupWeeklyTexts() {
      const currentWeekKey = getWeekKey();
      const storedWeekKey = localStorage.getItem("skkusy-weekKey");

      if (storedWeekKey && storedWeekKey !== currentWeekKey) {
        Object.keys(localStorage)
          .filter((k) => k.startsWith("skkusy-focus-") || k.startsWith("skkusy-progress-text"))
          .forEach((k) => localStorage.removeItem(k));
      }
      localStorage.setItem("skkusy-weekKey", currentWeekKey);

      const focusEls = document.querySelectorAll(".weekly-focus");
      focusEls.forEach((el) => {
        const key = el.getAttribute("data-focus-key");
        const storeKey = `skkusy-${key}`;
        const saved = localStorage.getItem(storeKey);
        if (saved) el.textContent = saved;
        el.addEventListener("input", () => {
          localStorage.setItem(storeKey, el.textContent.trim());
        });
      });

      const progressTextEl = document.getElementById("weekly-progress-text");
      const progressStoreKey = "skkusy-progress-text";
      const savedProgressText = localStorage.getItem(progressStoreKey);
      if (savedProgressText) progressTextEl.textContent = savedProgressText;
      progressTextEl.addEventListener("input", () => {
        localStorage.setItem(progressStoreKey, progressTextEl.textContent.trim());
      });
    })();

    const scheduleTitleInput = document.getElementById("schedule-title");
    const scheduleDateInput = document.getElementById("schedule-date");
    const scheduleTimeInput = document.getElementById("schedule-time");
    const scheduleTypeSelect = document.getElementById("schedule-type");
    const schedulePlaceInput = document.getElementById("schedule-place");
    const addScheduleBtn = document.getElementById("add-schedule-btn");
    const scheduleListEl = document.getElementById("schedule-list");

    const detailBox = document.getElementById("schedule-detail");
    const detailTitle = document.getElementById("detail-title");
    const detailDate = document.getElementById("detail-date");
    const detailTime = document.getElementById("detail-time");
    const detailType = document.getElementById("detail-type");
    const detailPlace = document.getElementById("detail-place");
    const closeDetailBtn = document.getElementById("close-detail-btn");

    let editingIndex = null;

    function renderScheduleList() {
      const schedules = loadSchedules();
      scheduleListEl.innerHTML = "";
      schedules.forEach((item, idx) => {
        const li = document.createElement("li");
        li.className = "item-card";

        const main = document.createElement("div");
        main.className = "item-main";
        const datePart = item.date || "ë‚ ì§œ ë¯¸ì •";
        const typePart = item.type || "ê¸°íƒ€";
        main.textContent = `${datePart} Â· ${typePart}`;

        const meta = document.createElement("div");
        meta.className = "item-meta";

        const titleSpan = document.createElement("span");
        titleSpan.textContent = item.title || "";

        const btnBox = document.createElement("span");
        const editBtn = document.createElement("button");
        editBtn.className = "btn-small";
        editBtn.type = "button";
        editBtn.textContent = "ìˆ˜ì •";
        editBtn.addEventListener("click", () => startEditSchedule(idx));

        const delBtn = document.createElement("button");
        delBtn.className = "btn-small";
        delBtn.type = "button";
        delBtn.textContent = "ì‚­ì œ";
        delBtn.addEventListener("click", () => deleteSchedule(idx));

        btnBox.appendChild(editBtn);
        btnBox.appendChild(delBtn);
        meta.appendChild(titleSpan);
        meta.appendChild(btnBox);

        li.appendChild(main);
        li.appendChild(meta);

        scheduleListEl.appendChild(li);
      });
    }

    function resetScheduleForm() {
      scheduleTitleInput.value = "";
      scheduleDateInput.value = "";
      scheduleTimeInput.value = "";
      scheduleTypeSelect.value = "ë…í•´";
      schedulePlaceInput.value = "";
      editingIndex = null;
      addScheduleBtn.textContent = "ì¼ì • ì¶”ê°€";
    }

    function startEditSchedule(index) {
      const schedules = loadSchedules();
      const item = schedules[index];
      if (!item) return;

      editingIndex = index;
      scheduleTitleInput.value = item.title || "";
      scheduleDateInput.value = item.date || "";
      scheduleTimeInput.value = item.time || "";
      scheduleTypeSelect.value = item.type || "ë…í•´";
      schedulePlaceInput.value = item.place || "";
      addScheduleBtn.textContent = "ì¼ì • ìˆ˜ì •";
    }

    function deleteSchedule(index) {
      const schedules = loadSchedules();
      if (index < 0 || index >= schedules.length) return;
      schedules.splice(index, 1);
      saveSchedules(schedules);
      renderScheduleList();

      const val = calendarMonthInput.value;
      if (val) {
        const [y, m] = val.split("-").map((v) => parseInt(v, 10));
        const year = y;
        const month = m - 1;
        if (!isNaN(year) && !isNaN(month)) {
          renderCalendar(year, month);
        }
      }
      detailBox.classList.add("hidden");
    }

    addScheduleBtn.addEventListener("click", () => {
      const title = scheduleTitleInput.value.trim();
      const date = scheduleDateInput.value;
      const time = scheduleTimeInput.value;
      const type = scheduleTypeSelect.value;
      const place = schedulePlaceInput.value.trim();

      if (!title || !date) {
        alert("ì¼ì • ì œëª©ê³¼ ë‚ ì§œëŠ” ë°˜ë“œì‹œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
        return;
      }

      const schedules = loadSchedules();

      if (editingIndex !== null) {
        if (editingIndex >= 0 && editingIndex < schedules.length) {
          schedules[editingIndex] = { title, date, time, type, place };
        }
      } else {
        schedules.push({ title, date, time, type, place });
      }

      saveSchedules(schedules);
      renderScheduleList();
      resetScheduleForm();

      const val = calendarMonthInput.value;
      if (val) {
        const [y, m] = val.split("-").map((v) => parseInt(v, 10));
        const year = y;
        const month = m - 1;
        if (!isNaN(year) && !isNaN(month)) {
          renderCalendar(year, month);
        }
      }
    });

    function showScheduleDetail(index) {
      const schedules = loadSchedules();
      const item = schedules[index];
      if (!item) return;

      detailTitle.textContent = item.title || "";
      detailDate.textContent = item.date || "-";
      detailTime.textContent = item.time || "ì‹œê°„ ì—†ìŒ";
      detailType.textContent = item.type || "ê¸°íƒ€";
      detailPlace.textContent = item.place || "-";

      detailBox.classList.remove("hidden");
    }

    closeDetailBtn.addEventListener("click", () => {
      detailBox.classList.add("hidden");
    });

    (function initSchedules() {
      renderScheduleList();
    })();

    const dayContextMenu = document.getElementById("day-context-menu");

    function showDayContextMenu(x, y) {
      dayContextMenu.style.left = x + "px";
      dayContextMenu.style.top = y + "px";
      dayContextMenu.style.display = "block";
    }

    document.addEventListener("click", (e) => {
      if (!dayContextMenu.contains(e.target)) {
        dayContextMenu.style.display = "none";
      }
    });

    dayContextMenu.addEventListener("click", (e) => {
      const actionEl = e.target.closest(".day-context-item");
      if (!actionEl || !currentContextDateKey) return;

      const action = actionEl.dataset.action;
      const skipArr = loadSkipDates();

      if (action === "delay") {
        if (!skipArr.includes(currentContextDateKey)) {
          skipArr.push(currentContextDateKey);
          saveSkipDates(skipArr);
        }
        const currentOffset = loadDayOffset();
        // ğŸ”¹ í•˜ë£¨ "ë’¤ë¡œ ë¯¸ë£¨ê¸°" â†’ offset -1 (ì˜¤ëŠ˜ ê±°ê°€ ë‚´ì¼ë¡œ ê°€ê²Œ)
        saveDayOffset(currentOffset - 1);
      } else if (action === "delete") {
        if (!skipArr.includes(currentContextDateKey)) {
          skipArr.push(currentContextDateKey);
          saveSkipDates(skipArr);
        }
      }

      const val = calendarMonthInput.value;
      if (val) {
        const [y, m] = val.split("-").map((v) => parseInt(v, 10));
        const year = y;
        const month = m - 1;
        if (!isNaN(year) && !isNaN(month)) {
          renderCalendar(year, month);
        }
      }
      updateTodayDayLabel();
      dayContextMenu.style.display = "none";
      currentContextDateKey = null;
    });
  </script>
</body>
</html>
